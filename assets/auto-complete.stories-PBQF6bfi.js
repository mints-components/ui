import{r as l,e as H,j as a}from"./iframe-dC1saC9w.js";import{c as d}from"./clsx-B-dksMZM.js";import{B as U}from"./button-DUVqhzzm.js";import{h as W}from"./waypoints-DSHzG6H_.js";import{I as $}from"./input-D-bjRh4c.js";import{S as F}from"./spinner-ByZ86-gy.js";function C({value:n,defaultValue:A,options:N,loading:j=!1,disabled:u=!1,placeholder:q,clearable:I=!1,onChange:v,onSelect:D,renderOption:w,emptyText:E="No options",className:z,children:R,...O}){const S=l.useRef(null),y=l.useRef(null),[p,r]=l.useState(!1),[V,x]=l.useState(A??""),[o,i]=l.useState(-1),s=n!==void 0?n:V,c=s?N.filter(e=>e.label?.toString().toLowerCase().includes(s.toLowerCase())):[];l.useEffect(()=>{p||i(-1)},[p,s]);const B=e=>{const t=e.target.value;n===void 0&&x(t),v?.(t),r(!!t)},T=e=>{n===void 0&&x(e.value),v?.(e.value),D?.(e),r(!1),i(-1)},M=e=>{e.stopPropagation(),n===void 0&&x(""),v?.(""),S.current?.focus(),r(!1)},L=e=>{e.relatedTarget&&y.current&&y.current.contains(e.relatedTarget)||r(!1)},_=e=>{!p&&s&&r(!0),e.key==="ArrowDown"&&(e.preventDefault(),i(t=>Math.min(c.length-1,t+1))),e.key==="ArrowUp"&&(e.preventDefault(),i(t=>Math.max(0,t-1))),e.key==="Enter"&&o>=0&&o<c.length&&T(c[o]),e.key==="Escape"&&r(!1)},K=I&&!!s&&!u,k={ref:S,value:s,disabled:u,placeholder:q,onChange:B,onBlur:L,onKeyDown:_,...O},P=R?H.cloneElement(R,k):a.jsx($,{...k,inputClassName:d("pr-10",u&&"opacity-50 pointer-events-none bg-zinc-100 dark:bg-zinc-800 text-zinc-400"),className:z});return a.jsxs("div",{className:d("relative w-full",z),children:[a.jsxs("div",{className:"relative w-full",children:[P,K&&a.jsx(U,{icon:a.jsx(W,{}),size:"sm",variant:"link",type:"button",onClick:M,"aria-label":"Clear",tabIndex:-1,className:"absolute right-3 top-1/2 -translate-y-1/2 z-10"})]}),p&&a.jsx("div",{ref:y,className:d("absolute z-10 mt-1 w-full bg-white border border-zinc-200 rounded-md shadow-lg max-h-60 overflow-auto","dark:bg-zinc-900 dark:border-zinc-700",u&&"opacity-50 pointer-events-none"),tabIndex:-1,children:j?a.jsx("div",{className:"p-4 text-center text-zinc-400 dark:text-zinc-500",children:a.jsx(F,{size:24})}):c.length===0?a.jsx("div",{className:"p-4 text-zinc-400 dark:text-zinc-500 text-center select-none",children:E}):c.map((e,t)=>a.jsx("div",{className:d("px-3 py-2 cursor-pointer select-none transition-colors",t===o?"bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100 font-semibold":"hover:bg-zinc-50 dark:hover:bg-zinc-800"),onMouseDown:()=>T(e),onMouseEnter:()=>i(t),"aria-selected":t===o,tabIndex:-1,children:w?w(e,t===o):e.label},e.value))})]})}C.__docgenInfo={description:"",methods:[],displayName:"AutoComplete",props:{value:{required:!1,tsType:{name:"string"},description:""},defaultValue:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"AutoCompleteOption"}],raw:"AutoCompleteOption[]"},description:""},loading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:""},clearable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(option: AutoCompleteOption) => void",signature:{arguments:[{type:{name:"AutoCompleteOption"},name:"option"}],return:{name:"void"}}},description:""},renderOption:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  option: AutoCompleteOption,
  active: boolean,
) => React.ReactNode`,signature:{arguments:[{type:{name:"AutoCompleteOption"},name:"option"},{type:{name:"boolean"},name:"active"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""},emptyText:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"",defaultValue:{value:"'No options'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},children:{required:!1,tsType:{name:"ReactReactElement",raw:"React.ReactElement"},description:`Custom input component. Must accept these controlled props:
ref, value, onChange, onBlur, onKeyDown, disabled, and placeholder.`}},composes:["Omit"]};function G(n){return a.jsx("input",{...n,style:{border:"1px solid #d97706",borderRadius:8,padding:"8px 12px",width:"100%",fontWeight:500,color:"#b45309",background:"#fffbe9"}})}const J=[{label:"Apple",value:"apple"},{label:"Banana",value:"banana"},{label:"Orange",value:"orange"},{label:"Peach",value:"peach"},{label:"Strawberry",value:"strawberry"}],te={title:"Components/AutoComplete",component:C,tags:["autodocs"],parameters:{layout:"centered",docs:{description:{component:"A flexible AutoComplete input supporting custom options, loading, clearable, keyboard navigation, and both light and dark themes."}}},args:{options:J,placeholder:"Type to search...",disabled:!1,loading:!1,clearable:!1},argTypes:{disabled:{control:"boolean"},loading:{control:"boolean"},clearable:{control:"boolean"},value:{control:"text"}}},m={},f={args:{clearable:!0}},g={args:{loading:!0}},b={args:{disabled:!0,defaultValue:"banana"}},h={args:{clearable:!0,placeholder:"Search with custom input..."},render:n=>a.jsx(C,{...n,children:a.jsx(G,{})})};m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:"{}",...m.parameters?.docs?.source}}};f.parameters={...f.parameters,docs:{...f.parameters?.docs,source:{originalSource:`{
  args: {
    clearable: true
  }
}`,...f.parameters?.docs?.source}}};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:`{
  args: {
    loading: true
  }
}`,...g.parameters?.docs?.source}}};b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:`{
  args: {
    disabled: true,
    defaultValue: 'banana'
  }
}`,...b.parameters?.docs?.source}}};h.parameters={...h.parameters,docs:{...h.parameters?.docs,source:{originalSource:`{
  args: {
    clearable: true,
    placeholder: 'Search with custom input...'
  },
  render: args => <AutoComplete {...args}>
      <Input />
    </AutoComplete>
}`,...h.parameters?.docs?.source}}};const ne=["Default","Clearable","LoadingState","Disabled","CustomInput"];export{f as Clearable,h as CustomInput,m as Default,b as Disabled,g as LoadingState,ne as __namedExportsOrder,te as default};
